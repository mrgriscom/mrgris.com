---
kind: article
created_at: 2013-03-25
title: Survivorship in the Digital Age
tags:
- tech
---

We store so much of our lives online these days.
What would happen to it all if something were to happen to you?

It used to be that when you passed on, your friends and family could go through your personal effects.
They'd find photo albums, old correspondence, account statements, address books (and probably a few things you didn't want them to find, but who cares; you're dead).
Even ten years ago, with the PC revolution well underway, they'd still find hard drives and CD backups.
But nowadays, what would they find?
Your data is in the cloud, or on a laptop that probably got destroyed in the accident you were in.
And if it didnt, that laptop had full-disk encryption turned on anyway.

It's a genuine concern that sizable chunk of your data (dare I say _you_) might simply disappear forever.
Who would have access to your accounts?
Who would even _know_ about all your accounts?

It's definitely a concern of mine.
I follow strong security practices, and I know for a fact that if I died or became incapacitated, no one close to me would be able to access my accounts or data, end of story.
Hell, I could just suffer from straight-up [amensia](https://blog.whitehatsec.com/cracking-aes-256-dmgs-and-epic-self-pwnage/), in which case even I would lose access to my data.

Clearly we need a failsafe plan -- a means of granting access that isn't solely dependent on the continued well-functioning of my brain.
But what?

* Give my passwords to a trusted friend?
* Seal them in an envelope in a safe deposit box?
* Use [a service](http://legacylocker.com) dedicated to the task?
* Set up an elaborate treasure hunt like in _The Goonies_?

But the risk is clear: these are all single points of failure.
The friend and I could have a falling out; they could be victim of a theft; the contents of my safe deposit box could pique the interest of a nosy government; the service could get hacked or go out of business; <span style="font-size: 80%;">and my subterranean booby traps will fail due to lack of maintenance and water damage</span>.
We can't have all our eggs in one basket.

Instead, what if we had a way to distribute the credentials among multiple trusted parties, where each individual piece alone is useless, but enough of them put together could effect recovery.
Enter *[Shamir's Secret Sharing Scheme](http://point-at-infinity.org/ssss/)* or _`ssss`_.

`ssss` allows splitting up a secret into many pieces (or _shares_), where any subset of them above a certain size (the _threshold_) is enough to reconstruct the secret.
If a set of shares is even one short of the threshold, it offers no more clue to the secret than random gibberish.

As an example let's produce nine shares:

~~~
$ ssss-split -n9 -t4
Generating shares using a (4,9) scheme with dynamic security level.
Enter the secret, at most 128 ASCII characters: Using a 184 bit security level.
1-6f55bc5bf173feea970cba965c29e9b25fb0338e8e5341
2-966dacee66cb473dfd19373f8cad74e343a14322dd860a
3-22308fa7600216b0b8cd8bdf5239103859a4cada44ba92
4-f296355aa3eb21edb2fe098a099a6240a87476bb72369a
5-1869ee11f17bc0932b810983903a955810a07b731134d6
6-5c140ea0ce7018a3f8c3fdf8ced72f8e491203beb69c35
7-c4d04686ed48a9fb25847464967d3360a7ed39102b97be
8-d0a34538bde9eca08a3fa42a23a16a5ddae3bad8d00af1
9-6c4e15159bee2ec4f97d62fa20edaa7e1d8b14855fc77f
~~~
{: style="margin-top: -20px;"}

Any four of them is enough to retrieve the secret:

~~~
$ ssss-combine -t4
Enter 4 shares separated by newlines:
Share [1/4]: 2-966dacee66cb473dfd19373f8cad74e343a14322dd860a
Share [2/4]: 5-1869ee11f17bc0932b810983903a955810a07b731134d6
Share [3/4]: 6-5c140ea0ce7018a3f8c3fdf8ced72f8e491203beb69c35
Share [4/4]: 9-6c4e15159bee2ec4f97d62fa20edaa7e1d8b14855fc77f
Resulting secret: the keys to the kingdom
~~~
{: style="margin-top: -20px;"}

~~~
$ ssss-combine -t4
Enter 4 shares separated by newlines:
Share [1/4]: 1-6f55bc5bf173feea970cba965c29e9b25fb0338e8e5341
Share [2/4]: 6-5c140ea0ce7018a3f8c3fdf8ced72f8e491203beb69c35
Share [3/4]: 8-d0a34538bde9eca08a3fa42a23a16a5ddae3bad8d00af1
Share [4/4]: 3-22308fa7600216b0b8cd8bdf5239103859a4cada44ba92
Resulting secret: the keys to the kingdom
~~~
{: style="margin-top: -35px;"}

So now we have the tool. How exactly do we use it? There are two main issues to consider:

1. what the secret payload should be
2. how to divide it up and distribute it among trusted people

## The Payload

The goal of the secret payload is that with it, someone could unlock your entire digital life.
They should be able to do this entirely without your help, and have a reasonable chance of success even at some indefinite point in the future.

At a minimum this means: knowledge of all accounts, usernames, passwords, security questions, encryption keys and passphrases, etc. 
But in addition to that, they'd also need a clear set of instructions on how to recover everything essentially from scratch.

For example, you're not going to include every single password for every account you have.
It would be completely unmaintainable.
What about new accounts you create after you distribute the shares?
Or changed passwords?
No, you probably need everything in a password vault.
So include the master password to that.
But how would they get the password vault?
You probably have a backup service*.
Include the password to that too.
What about any 2-factor auth?
They'll need the one-time-use codes for that as well (or at least a means of retrieving them).
You're starting to get the hint... _creating the universe from nothing_, avoiding chicken-and-egg, yadda yadda.

\* I'm reminded of the uneasy moment when I realized my keepass was backed up to my crashplan, and the password to my crashplan was in... my keepass.
{: .footnote}

The instructions for your recovery plan need to literally work from _beyond the grave_.
What you put in place should be able to work, _with no intervention from yourself_, potentially 5--10 years down the road.
So think through it very carefully.
Do a dry run.
Don't depend on undependable things (Google will probably be around in 10 years; that dude's _Hacker News_ weekend project will not).
Identify points of failure and add mitigating steps (for example, including a snapshot backup of your password vault in the payload is probably a good idea).

## The Secret

One property of `ssss` is that the shares must be at least as long as the secret.
Your full 'digital will' is by this point probably becoming quite long.
You don't want to dump this full content into `ssss`; the shares would be unwieldy, and take very long to generate.

The secret must be short. You have two options:

- Distribute the 'will' in plaintext.
Replace each sensitive piece of info with a fill-in-the-blank, and construct the secret as a list of the sensitive info to fill in.

  > Pro: shareholders can review the overall instructions _a priori_ and request clarifications

  > Con: will not work if your content has many passwords (such as if including a snapshot of your password vault); method strikes me as somehow *inelegant*

- Encrypt the 'will' with a symmetric key and use that key as the secret.
Distribute the encrypted payload to some (see _Roles_ below) along with their shares

      $ passgen.py -b128
      vfkn66dtxv2nopheneod0jb64 (length: 25; 129.2b entropy)
      $ gpg -c --armor < my_directives
      Enter passphrase:
      -----BEGIN PGP MESSAGE-----
      Version: GnuPG v1.4.10 (GNU/Linux)

      jA0EAwMCU/FDY3Gf3RtgyRyfXSlLrTlYuZWvSeLNi7mdv/E2XrE6Q3Fsbls7
      ...

  > Pro: you can include traditional 'will-like' content meant to only be viewed upon the event of your death (or does this only happen in movies?)

## The People

The hardest part of the entire process is deciding just who to distribute the shares of your secret among, and what the threshold should be.

The overarching advice I can give is: **keep it simple!**
You can go crazy with fancy arrangements, but it's best to pick a small, manageable set of shares and people.
We're not trying to maintain return-strike capability in a nuclear attack here.
By keeping things simple, you can really think through the reconstruction scenarios and ensure both the security and resiliency of the system.

The people involved fall into two roles: _Executors_ and _Shareholders_.

**Executors** are the people you want to gain access if something happens to you.
They have access to the payload, and the list of all shareholders.
They would be responsible for collecting and combining the various shares, and following the instructions for recovery.
They need not be technical, but should know where to find someone (or how to find someone who could find someone) capable of running `ssss` and doing decryption.
Executors are likely also shareholders.

**Shareholders** simply hold the individual shares of the secret.
They don't have access to the payload it would unlock, nor do they necessarily even know who the other shareholders are.
Traits of a good shareholder:

* trustworthy
* stable -- have been in your life for a long time, and likely to remain in your life for a long time
* will take the endeavor seriously
* basic digital security competency

### Choosing



consider the possibility that _you and a custodian could be taken out at the same time_.

but pick a small set, so you can really go through the scenarios in your head. in particularly focus on the minimum viable set(s) of people that can reconstruct your secret, and decide if you're comfortable with it.


you can give some custodians more weight by allocating them more shares (and scaling the unlocking threshold accordingly).
best to pick groups of custodians from different areas of your life
you can minimize conspiracy amongst custodians that know each other by giving them duplicate/redundant shares. ie 3 college buddies all get share A. any one of them is good for 1 share, but all 3 of them conspiring is not better. or give shares AB AC and BC. if all 3 conspire it's only the weight of two shares.

parents
spouse
extended family
old friends

you can keep extra shares in your possession to facilitiate recovery. keep them in a way that they would easily be made available if need be. e.g., safe deposit box, or a service like deadmansswitch.

notes for custodians:

don't lose it
keep the token as secret as possible
hand it over when called upon
independently verify that handover is warranted

expect jokes the next few times you talk to these people. "Is this channel secure?"

deadmansswitch

## The Threshold

recommend a relatively high threshold, assuming you choose dependable custodians. you can mitigate by having extra shares in reserve that will become available if something happens.



bourne identity

## Distribution

barcode

hardest part is handling to tokens during generation and distrubtion and not leaving traces. send from different email providers?

